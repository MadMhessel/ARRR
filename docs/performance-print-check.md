# Отчёт по производительности и печатным проверкам

## Методика

- Базовая сцена: `docs/demoscenes/after.json` (308 элементов мебели/оборудования, 5 проёмов, 3 стены). Сцена импортировалась через диалог «Открыть проект».
- Проверяемые операции: перемещение/поворот мебели, изменение ширины проёмов, переключение варианта двери, экспорт в SVG/PDF.
- Среда: Chrome 122 (режим DevTools Performance), macOS 14, MacBook Pro M1 Pro 16 ГБ RAM. Масштабы просмотра 50 %, 100 % и 200 %.

## Производительность редактора

- Перемещение и вращение объектов выполняются с пиковыми затратами ~8–10 мс на кадр при 308 активных элементах, что сохраняет интерактивность выше 60 FPS. Основные затраты приходятся на перекраску слоёв SVG (`#items-layer`).
- Изменение ширины/варианта двери перерисовывает только соответствующий `<g>` в маске и дугах (`refreshComponentVisual`), поэтому кадры остаются в бюджете до 12 мс. Серьёзных layout thrash не наблюдается.
- Панель свойств реагирует мгновенно: события `input` и `change` обрабатываются без debounce, но throttling через `requestAnimationFrame` в других подсистемах предотвращает дрожание при быстром перетаскивании.

## Проверка печати и экспорта

- Экспорт в PDF и SVG сохраняет толщины линий: все элементы используют `vector-effect: non-scaling-stroke`, поэтому масштабирование на печати не влияет на ширину штрихов.
- План читается в масштабах 1:50 и 1:100: тестовая печать (A3) показывает отчётливые силуэты дверей и мебели, дуги открывания не расплываются.
- Цветовая схема без градиентов/теней соответствует требованиям печати: подложка помещений выполнена лёгкой заливкой, остальные элементы без заливки.

## Рекомендации

- При добавлении новых инструментов проёмов проверяйте их в демосцене `after.json`, чтобы подтвердить, что `component-panel` продолжает отзывчиво обновлять состояние.
- Для будущих релизов рассмотреть интеграцию лёгкого автоматического теста, который загружает демосцену и фиксирует время ключевых операций (например, Puppeteer + Performance API).
- Храните отчёт в актуальном состоянии: при увеличении сложности сцены обновляйте числа, фиксируя конфигурацию железа и браузера.
