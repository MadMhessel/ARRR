# Как добавить новый плановый предмет и не нарушить стиль

1. **Определите тип**. Выберите категорию (`Посадка гостей`, `Оборудование кофе-бара` и т.д.) и изучите эталон в `docs/coffee-plan-visual-reference.md`.
2. **Добавьте запись в `PLAN_LIBRARY`**.
   - Укажите `id`, `label`, `builder`, `width`, `depth`, `scaleStepCm`.
   - Для сложных корпусов используйте опции билдеров:
     - `buildAppliance`: `innerAlign`, `frontArcs`, `circles`, `paths`, `handle`.
     - `buildBanquetteCorner`, `buildMopSink`, `buildFloorDrain` — готовые шаблоны для Г-банкеток и инженерии.
3. **Расширьте `CATEGORY_ITEMS`**. Внесите новый ID в подходящую категорию — он автоматически появится в интерфейсе.
4. **Настройте миграцию**. Если шаблон заменяет старый ID, добавьте строку в `TEMPLATE_MIGRATION_MAP` и обновите `docs/template-migration-map.md`.
5. **Проверьте геометрию**.
   - В DevTools вызовите `core.getBBox()` и убедитесь, что центр близок к (0;0).
   - Проверьте, что контур не выходит за `[-w/2; w/2] × [-h/2; h/2]` и соблюдён отступ ≥ 2 px.
6. **Визуальное ревью**.
   - Контур `#111111`, детали `#676D72`, заливка `#EAF3E7`.
   - Дверные и сервисные линии — пунктир 6/4, толщина 1.0 px.
   - Проверка на читаемость при печати 1:100 и на экране 100 %.
7. **Обновите документацию**.
   - Добавьте строку в `docs/coffee-plan-catalog.md` (ID, название, типоразмер, признак).
   - При необходимости расширьте карточку в `docs/coffee-plan-visual-reference.md`.
8. **Автотесты**. Запустите `npm run lint` (если появится) и проверьте сцену «after» (`docs/demoscenes/after.json`) — добавленный объект должен правильно отображаться в режиме «План».
9. **Пул-реквест**. В описании PR укажите новый ID, категорию и подтверждение, что проверки из пунктов 5–8 выполнены.
